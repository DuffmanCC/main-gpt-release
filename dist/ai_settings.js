import{d as O,o as r,c as m,a,t as U,z as I,_ as F,r as i,b as n,i as J,k as S,w as p,u as R,f as M,F as W,e as c,h as H,p as Q,q as X,s as Y}from"./wug-style.js";import{c as Z,_ as ee,b as te}from"./a-text.vue_vue_type_script_setup_true_lang.js";import{_ as V,a as ae}from"./a-select.vue_vue_type_script_setup_true_lang.js";import{_ as ne}from"./a-checkbox.vue_vue_type_script_setup_true_lang.js";import{a as ie}from"./constants.js";import{s as se}from"./requests.js";import{a as D,e as oe}from"./tools.js";const le={class:"tw-font-arboria tw-relative tw-mt-8 tw-mr-8 tw-flex tw-flex-col tw-gap-2"},re={class:"tw-font-bold tw-text-2xl tw-mb-2"},pe={class:"tw-flex tw-flex-col tw-gap-6 tw-py-4"},ce=O({__name:"a-page-wrapper",props:{pageTitle:String},setup(s){return(o,f)=>(r(),m("div",le,[a("h1",re,U(s.pageTitle),1),a("div",pe,[I(o.$slots,"default")])]))}}),de={},ue={class:"tw-p-6 tw-bg-white tw-rounded-xl tw-flex tw-flex-col tw-gap-8"};function fe(s,o){return r(),m("section",ue,[I(s.$slots,"default")])}const T=F(de,[["render",fe]]),_e={class:"tw-flex tw-items-center tw-gap-4"},$=O({__name:"ai-settings-field",props:{id:String,label:String,value:String,howToLink:String,createLink:String},emits:["input"],setup(s,{emit:o}){const f=s,v=o,_=i(f.value);function x(d){_.value=d,v("input",d)}return(d,w)=>(r(),m("div",_e,[n(Z,{id:s.id,label:s.label,value:_.value,class:"tw-w-full tw-max-w-lg",onInput:w[0]||(w[0]=h=>x(h))},null,8,["id","label","value"])]))}}),we={class:"tw-flex tw-flex-col tw-gap-3"},ge=a("h2",{class:"tw-text-3xl"},"Pineconne",-1),me=a("p",{class:"tw-text-xl tw-font-light"},[c(" Create an account on "),a("a",{href:"https://www.pinecone.io/",class:"tw-text-blue-500 tw-underline",target:"_blank",rel:"noopener noreferrer"}," Pinecone.io "),c(" and paste the api key below. ")],-1),ve={class:"tw-mt-4"},xe={class:"tw-flex tw-flex-col tw-gap-4"},he=a("h2",{class:"tw-text-3xl"},"Open-AI",-1),Ae=a("p",{class:"tw-text-xl tw-font-light"},[c(" Create an account on "),a("a",{href:"https://openai.com/",class:"tw-text-blue-500 tw-underline",target:"_blank",rel:"noopener noreferrer"}," OpenAI.com "),c(" and paste the api key and organization below. ")],-1),ke={class:"tw-mt-4"},ye={class:"tw-flex tw-flex-col tw-gap-4"},Ce=O({__name:"ai-settings",setup(s){const o=J("aiSettingsData");if(!o)throw new Error("aiSettingsData is undefined");const{openAiApiKey:f,openAiOrg:v,pineconeApiKey:_,ajaxAction:x,ajaxNonce:d,ajaxUrl:w,arePineconeCredentialsValid:h,areOpenAiCredentialsValid:N,isActivePlugin:z,gdprSemaphore:B,pageTitle:E}=o,A=i(f),k=i(v),y=i(_),C=i(h),b=i(N),G=i(z),K=i(B),u=i([]);async function g(l){try{const e=await se(w,x,d,JSON.stringify(l));D(u,"success",e.message),C.value=e.arePineconeCredentialsValid,b.value=e.areOpenAiCredentialsValid}catch(e){if(j(e)){const t=JSON.parse(e.message);C.value=t.arePineconeCredentialsValid,b.value=t.areOpenAiCredentialsValid;const P=oe(e);D(u,"error",P,0)}}}function j(l){return l&&typeof l.message=="string"}function q(l){u.value=u.value.filter(e=>e.id!==l)}return(l,e)=>(r(),S(ce,{pageTitle:R(E)},{default:p(()=>[n(te,{class:"tw-top-12"},{default:p(()=>[(r(!0),m(W,null,M(u.value,t=>(r(),S(ee,{key:t.id,type:t.type,message:t.message,time:t.time,onClose:P=>q(t.id)},null,8,["type","message","time","onClose"]))),128))]),_:1}),n(T,null,{default:p(()=>[a("div",we,[ge,me,n($,{id:"pinecone_api_key",label:"Pinecone api key",value:y.value,howToLink:"#",createLink:"#",onInput:e[0]||(e[0]=t=>y.value=t)},null,8,["value"]),a("div",ve,[n(V,{onClick:e[1]||(e[1]=t=>g({pinecone_api_key:y.value}))},{default:p(()=>[c(" Update ")]),_:1})])]),a("div",xe,[he,Ae,n($,{id:"openai_api_key",label:"Open AI api key",value:A.value,howToLink:"#",createLink:"#",onInput:e[2]||(e[2]=t=>A.value=t)},null,8,["value"]),n($,{id:"openai_organization",label:"Open AI api organization",value:k.value,howToLink:"#",createLink:"#",onInput:e[3]||(e[3]=t=>k.value=t)},null,8,["value"]),a("div",ke,[n(V,{onClick:e[4]||(e[4]=t=>g({openai_api_key:A.value,openai_organization:k.value}))},{default:p(()=>[c(" Update ")]),_:1})])])]),_:1}),C.value&&b.value?(r(),S(T,{key:0},{default:p(()=>[a("div",ye,[n(ne,{label:"Active Plugin?",name:"is_active_plugin",id:"is_active",value:G.value,onChange:e[5]||(e[5]=t=>g({is_active_plugin:t}))},null,8,["value"]),n(ae,{id:"gdpr_semaphore",label:"GDPR Configuration",class:"tw-max-w-lg",options:R(ie),selectedOption:K.value,help:`
            <ul><li><span class='tw-font-semibold'>Always:</span> force AiChatter to always require GDPR for the chatter and for the lead.</li>
              <li><span class='tw-font-semibold'>Never:</span> force AiChatter to never require GDPR not lead GDPR.</li>
              <li><span class='tw-font-semibold'>Configurable:</span> as it is now.</li>
            </ul>
          `,onSelectOption:e[6]||(e[6]=t=>g({gdpr_semaphore:t}))},null,8,["options","selectedOption"])])]),_:1})):H("",!0)]),_:1},8,["pageTitle"]))}});let L={};L=window.ai_settings.data;const be=Q({setup(){Y("aiSettingsData",L)},render:()=>X(Ce)});be.mount("#main_ai_settings");
